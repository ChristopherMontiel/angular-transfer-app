<h1>Transferir</h1>
<!--
    Buscar Destinatario
    [                     ]
    Detalle destinatario:
    Nombre: [           ]
    Correo: [           ]
    Banco:  [           ]
    Tipo de Cuenta: [           ]

    [Transferir]
-->
<label for="recipientList" class="form-label">Buscar Destinatario</label>
<input class="form-control" (change)="selectRecipient($event)" list="datalistOptions" id="recipientList" placeholder="Escriba para buscar...">
<datalist id="datalistOptions">
  <option *ngFor="let recipient of recipientList">
    {{recipient.name}}
  </option>
</datalist>

<br>

<div *ngIf="nameSelected && viewForm" class="card" style="width: 18rem;">
  <div class="card-body">
    <h5 class="card-title">Transferir a...</h5>
    <p class="card-text">Nombre: {{ nameSelected }}</p>
    <p class="card-text">Correo: {{ mailSelected }}</p>
    <p class="card-text">Banco: {{ bankSelected }}</p>
    <p class="card-text">Tipo de Cuenta: {{ accTypeSelected }}</p>

    <label for="amount" class="col-sm-3 col-form-label">Monto:  </label>
    <div class="col-sm-10">
      <input #amountInput type="number" class="form-control" id="amount">
    </div>

    <br>

    <button type = "button" class= "btn btn-primary" onclick="" (click)="makeTransfer(amountInput.value)"> Transferir</button>

  </div>
</div>

<div *ngIf="viewError">
  <div class="card" style="width: 18rem;">
    <div class="card-header">
      <p>Error al agregar nuevo destinatario:</p>
    </div>
    <ul class="list-group list-group-flush">
      <li *ngFor="let err of errList" class="list-group-item">
        {{ err }}
      </li>
    </ul>
    <div class="card-footer">
      <button class= "btn btn-primary" onclick="" (click)="enableForm()"> Volver a intentar </button>
    </div>
  </div>
  <!--Valido: {{ formRecipient.valid | json }} -->
</div>

<div *ngIf="viewOK">
  <div class="card" style="width: 18rem;">
    <div class="card-header">
      <h5 class="card-title">¡Transferencia realizada exitosamente!</h5>
    </div>
    <div class="card-body">
      <p class="card-text">Nombre: {{ dataList.recName }}</p>
      <p class="card-text">Rut: {{ dataList.recNumber + '-' +  dataList.recDv  }}</p>
      <p class="card-text">Banco: {{ dataList.recBank }}</p>
      <p class="card-text">Tipo de Cuenta: {{ dataList.recAccType }}</p>
      <p class="card-text">Fecha y hora de la transacción: {{ dataList.date + ' ' + dataList.time  }}</p>
    </div>
    <div class="card-footer">
      <button class= "btn btn-primary" onclick="" (click)="enableForm()"> Volver a intentar </button>
    </div>
  </div>
  <!--Valido: {{ formRecipient.valid | json }} -->
</div>

<br>
